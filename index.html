<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>AccÃ¨s - Base scientifique</title>
<link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
<style>
  body{
    background:#070809;
    color:#dfeef0;
    font-family:'VT323', monospace;
    margin:0; padding:24px;
    display:flex; align-items:center; justify-content:center; min-height:100vh;
  }
  .card{
    background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
    border:1px solid rgba(57,255,20,0.08);
    padding:28px; border-radius:10px; width:360px; box-shadow:0 6px 30px rgba(0,0,0,0.6);
  }
  h1{color:#39ff14; font-size:28px; margin:0 0 14px;}
  label{display:block; font-size:13px; color:#a7bfc6; margin-top:12px;}
  input[type="text"], input[type="date"]{
    width:100%; padding:8px 10px; margin-top:6px;
    background:#000; color:#39ff14; border:1px solid #2f2f2f; border-radius:6px; font-size:16px;
  }
  .hint{font-size:12px; color:#8fa6ad; margin-top:6px;}
  .row{display:flex; gap:8px; margin-top:14px; align-items:center;}
  button{
    background:#39ff14; color:#000; border:none; padding:10px 14px; border-radius:6px; cursor:pointer;
    font-weight:700;
  }
  .note{font-size:12px;color:#9aa5b1;margin-top:12px;}
  #notif{
    display:none;
    position:fixed; right:18px; bottom:18px;
    background:#39ff14; color:#000; padding:12px 14px; border-radius:8px;
    box-shadow:0 0 18px #39ff14; font-weight:700;
  }
</style>
</head>
<body>

  <div class="card" role="main" aria-labelledby="title">
    <h1 id="title">BASE â€” AccÃ¨s restreint</h1>

    <label for="dob">Date de naissance de la victime</label>
    <input id="dob" type="text" placeholder="ex : 5.02.2004 ou 05/02/2004">

    <label for="caseNo">NumÃ©ro de dossier</label>
    <input id="caseNo" type="text" placeholder="ex : 52-15763">

    <div class="hint">Saisissez les informations exactes pour accÃ©der Ã  la page d'autopsie.</div>

    <div class="row">
      <button id="checkBtn" type="button">VÃ©rifier et ouvrir</button>
      <div class="note">Interface style police-scientifique</div>
    </div>

    <div class="note" style="margin-top:8px;">(Pour le jeu : DOB = <strong>5.02.2004</strong> â€” Dossier = <strong>52-15763</strong>)</div>
  </div>

  <div id="notif">ðŸŽ‰ Bravo â€” vous pouvez ouvrir l'enveloppe 2</div>

<script>
/* Config : valeurs acceptÃ©es (on accepte quelques formats courants) */
const ACCEPTED_DOBS = [
  // Normalisations acceptÃ©es (strings comparÃ©es sans espaces ni zÃ©ros inutiles)
  "5.2.2004", "05.02.2004", "05/02/2004", "2004-02-05", "5.02.2004", "5/2/2004"
];
const ACCEPTED_CASES = [
  "52-15763", "5215763", "52 15 763", "52.15.763"
];

/* helper : normaliser entrÃ©e */
function normalize(s){
  return String(s||"").trim().toLowerCase().replace(/\s+/g,'').replace(/[^\d\-\/\.]/g,'');
}

/* vÃ©rifier dob en acceptant variantes */
function matchDob(input){
  const n = normalize(input).replace(/(^0+)/,'').replace(/\/0+/g,'/').replace(/\.0+/g,'.');
  // try simple direct compare after cleaning dots and slashes
  for(const v of ACCEPTED_DOBS){
    if(normalize(v).replace(/^0+/,'') === n) return true;
    // compare more flexibly: replace / with . etc
    if(normalize(v).replace(/[\/\.]/g,'') === n.replace(/[\/\.]/g,'')) return true;
  }
  return false;
}

function matchCase(input){
  const n = normalize(input).replace(/[.\s]/g,'').replace(/^-+/,'');
  for(const v of ACCEPTED_CASES){
    if(normalize(v).replace(/[.\s]/g,'') === n) return true;
  }
  return false;
}

/* UI logic */
const btn = document.getElementById('checkBtn');
const dobEl = document.getElementById('dob');
const caseEl = document.getElementById('caseNo');
const notif = document.getElementById('notif');

function showNotif(text){
  notif.textContent = text;
  notif.style.display = 'block';
  // auto-hide after 6s
  setTimeout(()=>{ notif.style.display='none'; }, 6000);
}

/* Redirect target (page finale fournie) */
const TARGET_URL = "https://sites.google.com/view/scenesdecrimes/accueil/base-de-donn%C3%A9es/jcp";

btn.addEventListener('click', ()=>{
  const dobVal = dobEl.value;
  const caseVal = caseEl.value;
  if(matchDob(dobVal) && matchCase(caseVal)){
    showNotif("ðŸŽ‰ Bravo â€” vous pouvez ouvrir l'enveloppe 2");
    // petit dÃ©lai pour laisser voir la notif avant redirection
    setTimeout(()=>{ window.location.href = TARGET_URL; }, 900);
  } else {
    showNotif("Erreur â€” informations incorrectes");
  }
});

/* Enter key support */
[dobEl, caseEl].forEach(el=>{
  el.addEventListener('keydown', (e)=>{
    if(e.key === 'Enter') { btn.click(); }
  });
});
</script>

</body>
</html>
